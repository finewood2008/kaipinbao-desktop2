
# è½åœ°é¡µæ•°æ®ç›‘æ§ä¸é˜¶æ®µä¼˜åŒ–è®¡åˆ’

## é—®é¢˜æ¦‚è¿°

ç”¨æˆ·æå‡ºäº†ä¸‰ä¸ªæ ¸å¿ƒéœ€æ±‚ï¼š
1. StageIndicatorï¼ˆé˜¶æ®µæŒ‡ç¤ºå™¨ï¼‰éœ€è¦å±…ä¸­æ˜¾ç¤º
2. è½åœ°é¡µå‘å¸ƒåéœ€è¦æ•°æ®ç›‘æ§é¢æ¿ï¼ŒAI åˆ†æäº§å“æ˜¯å¦é€‚åˆå¼€å“
3. äº§å“å®šä¹‰é˜¶æ®µè¿”å›åè¾“å…¥æ¡†æ¶ˆå¤±çš„é—®é¢˜

---

## ä¸€ã€StageIndicator å±…ä¸­ä¼˜åŒ–

### å½“å‰é—®é¢˜
`StageIndicator` ç»„ä»¶ä½¿ç”¨ `justify-between` å¸ƒå±€ï¼Œå¯¼è‡´é˜¶æ®µå›¾æ ‡åˆ†æ•£åˆ°ä¸¤ç«¯ï¼Œè€Œéå±…ä¸­ã€‚

### è§£å†³æ–¹æ¡ˆ
ä¿®æ”¹å®¹å™¨å¸ƒå±€ä¸º `justify-center`ï¼Œå¹¶ä¸ºæ¯ä¸ªé˜¶æ®µå…ƒç´ æ·»åŠ é€‚å½“é—´è·ã€‚

### ä¿®æ”¹æ–‡ä»¶
- `src/components/StageIndicator.tsx`

---

## äºŒã€è½åœ°é¡µæ•°æ®ç›‘æ§ç³»ç»Ÿ

### åŠŸèƒ½è®¾è®¡

è½åœ°é¡µæ¿å—å°†åˆ†ä¸ºä¸¤ä¸ªå­é¡µé¢ï¼š
1. **è½åœ°é¡µç”Ÿæˆé¡µ**ï¼ˆç°æœ‰ï¼‰ï¼šç”Ÿæˆå’Œé¢„è§ˆè½åœ°é¡µ
2. **æ•°æ®ç›‘æ§é¡µ**ï¼ˆæ–°å¢ï¼‰ï¼šå‘å¸ƒåè¿›å…¥ï¼Œå®æ—¶ç›‘æ§å¸‚åœºåé¦ˆ

### æ•°æ®ç›‘æ§é¡µé¢å†…å®¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â† è¿”å›ç¼–è¾‘]              è½åœ°é¡µæ•°æ®ç›‘æ§            [è®¿é—®é¡µé¢]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   ğŸ‘ è®¿é—®é‡   â”‚  â”‚   ğŸ“§ é‚®ç®±æ•°   â”‚  â”‚  ğŸ“ˆ è½¬åŒ–ç‡   â”‚      â”‚
â”‚  â”‚     156      â”‚  â”‚      23      â”‚  â”‚    14.7%     â”‚      â”‚
â”‚  â”‚   +12 ä»Šæ—¥   â”‚  â”‚   +5 ä»Šæ—¥    â”‚  â”‚   â†‘2.3%      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  è®¿é—®é‡è¶‹åŠ¿å›¾è¡¨                       â”‚   â”‚
â”‚  â”‚            (è¿‡å»7å¤©/30å¤© æŠ˜çº¿å›¾)                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ¤– AI å¸‚åœºåˆ†æå¸ˆå»ºè®®                                 â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  åŸºäºå½“å‰æ•°æ®åˆ†æï¼š                                    â”‚   â”‚
â”‚  â”‚  â€¢ è½¬åŒ–ç‡ 14.7% é«˜äºç”µå•†å¹³å‡å€¼ (3-5%)                 â”‚   â”‚
â”‚  â”‚  â€¢ é‚®ç®±æ”¶é›†å¢é€Ÿç¨³å®šï¼Œå¸‚åœºå…´è¶£åº¦è‰¯å¥½                    â”‚   â”‚
â”‚  â”‚  â€¢ å»ºè®®ï¼šäº§å“å…·å¤‡å¼€å“æ½œåŠ›ï¼Œå¯è¿›å…¥æ ·å“é˜¶æ®µ               â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  [è®© AI ç”Ÿæˆè¯¦ç»†åˆ†ææŠ¥å‘Š]                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ“‹ é‚®ç®±è®¢é˜…åˆ—è¡¨                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚ example@email.com      â”‚ 2024-01-15 14:32    â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ user@domain.com        â”‚ 2024-01-15 10:18    â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ ...                    â”‚ ...                 â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚  [å¯¼å‡º CSV]                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### AI å¸‚åœºåˆ†æåŠŸèƒ½

AI å°†åŸºäºä»¥ä¸‹æ•°æ®åˆ¤æ–­äº§å“æ˜¯å¦é€‚åˆå¼€å“ï¼š
- è®¿é—®é‡ä¸è½¬åŒ–ç‡å¯¹æ¯”è¡Œä¸šå¹³å‡
- é‚®ç®±æ”¶é›†é€Ÿåº¦ä¸è¶‹åŠ¿
- ç”¨æˆ·åœ°åŸŸåˆ†å¸ƒï¼ˆå¦‚æœ‰ï¼‰
- ä¸ç«å“æ•°æ®å¯¹æ¯”ï¼ˆæ¥è‡ª PRD é˜¶æ®µï¼‰

### é¡µé¢åˆ‡æ¢é€»è¾‘

```
è½åœ°é¡µæ¿å—
â”œâ”€â”€ æœªå‘å¸ƒçŠ¶æ€ â†’ æ˜¾ç¤ºè½åœ°é¡µç”Ÿæˆé¡µé¢
â””â”€â”€ å·²å‘å¸ƒçŠ¶æ€ â†’ æ˜¾ç¤ºæ•°æ®ç›‘æ§é¡µé¢
    â””â”€â”€ [è¿”å›ç¼–è¾‘] â†’ åˆ‡æ¢åˆ°ç”Ÿæˆé¡µé¢ï¼ˆå¯é‡æ–°ç”Ÿæˆï¼‰
```

### æ–°å¢æ–‡ä»¶
- `src/components/LandingPageAnalytics.tsx` - æ•°æ®ç›‘æ§ç»„ä»¶

### ä¿®æ”¹æ–‡ä»¶
- `src/components/LandingPageBuilder.tsx` - æ·»åŠ é¡µé¢åˆ‡æ¢é€»è¾‘
- `supabase/functions/analyze-landing-page/index.ts` - AI åˆ†æ Edge Functionï¼ˆæ–°å»ºï¼‰

### æ•°æ®åº“æŸ¥è¯¢å¢å¼º

éœ€è¦è·å–çš„é¢å¤–æ•°æ®ï¼š
- æŒ‰æ—¥æœŸåˆ†ç»„çš„è®¿é—®é‡å’Œé‚®ç®±æäº¤æ•°ï¼ˆç”¨äºå›¾è¡¨ï¼‰
- é‚®ç®±åˆ—è¡¨è¯¦æƒ…

---

## ä¸‰ã€äº§å“å®šä¹‰è¾“å…¥æ¡†ä¿®å¤

### é—®é¢˜åˆ†æ

å½“ç”¨æˆ·åœ¨é˜¶æ®µ 2 æˆ– 3ï¼ˆcurrent_stage > 1ï¼‰æ—¶ç‚¹å‡»"äº§å“å®šä¹‰"è¿”å›ï¼š
- `Project.tsx` æ£€æµ‹åˆ° `current_stage !== 1`
- æ¸²æŸ“äº†é PRD é˜¶æ®µçš„èŠå¤©å¸ƒå±€ï¼ˆlines 477-536ï¼‰
- è¯¥å¸ƒå±€æ²¡æœ‰æ­£ç¡®æ˜¾ç¤ºè¾“å…¥æ¡†

### æ ¹æœ¬åŸå› 

`Project.tsx` çš„æ¡ä»¶æ¸²æŸ“é€»è¾‘ï¼š
```tsx
{project?.current_stage === 1 ? (
  <PrdPhase ... />  // åŒ…å«å®Œæ•´çš„ 4 ä¸ªå­é˜¶æ®µ
) : (
  // ç®€åŒ–çš„èŠå¤©å¸ƒå±€ï¼Œç”¨äºé PRD é˜¶æ®µ
)}
```

å½“ `current_stage > 1` æ—¶ï¼Œå³ä½¿ç”¨æˆ·é€šè¿‡ StageIndicator è¿”å›æŸ¥çœ‹äº§å“å®šä¹‰ï¼Œä¹Ÿä¼šæ˜¾ç¤ºç®€åŒ–å¸ƒå±€ã€‚

### è§£å†³æ–¹æ¡ˆ

ä¿®æ”¹é€»è¾‘ï¼šå½“ `activeTab === "chat"` æ—¶ï¼Œå§‹ç»ˆæ¸²æŸ“ `PrdPhase` ç»„ä»¶ï¼Œä½†æ·»åŠ åªè¯»æ¨¡å¼æç¤ºã€‚

### è®¾è®¡æ”¹è¿›

å¯¹äºå·²å®Œæˆçš„ PRD é˜¶æ®µï¼ˆ`current_stage > 1`ï¼‰ï¼š
1. ä¿ç•™ `PrdPhase` ç»„ä»¶çš„å®Œæ•´æ¸²æŸ“
2. æ·»åŠ "åªè¯»æ¨¡å¼"æç¤ºæ¡
3. å…è®¸æŸ¥çœ‹ä½†ä¸é¼“åŠ±ä¿®æ”¹ï¼ˆæˆ–å®Œå…¨ç¦ç”¨è¾“å…¥ï¼‰
4. æä¾›"é‡æ–°å¯åŠ¨å¯¹è¯"é€‰é¡¹ï¼ˆéœ€ç¡®è®¤ï¼‰

### ä¿®æ”¹æ–‡ä»¶
- `src/pages/Project.tsx` - è°ƒæ•´æ¡ä»¶æ¸²æŸ“é€»è¾‘
- `src/components/PrdPhase.tsx` - æ·»åŠ åªè¯»æ¨¡å¼æ”¯æŒ

---

## æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. StageIndicator å±…ä¸­

```tsx
// ä¿®æ”¹å‰
<div className="flex items-center justify-between py-2">

// ä¿®æ”¹å
<div className="flex items-center justify-center gap-4 py-2">
```

åŒæ—¶è°ƒæ•´è¿æ¥çº¿çš„å®½åº¦ä¸ºå›ºå®šå€¼è€Œé flex-1ã€‚

### 2. LandingPageAnalytics ç»„ä»¶ç»“æ„

```tsx
interface LandingPageAnalyticsProps {
  landingPageId: string;
  landingPageSlug: string;
  landingPageTitle: string;
  onBackToEdit: () => void;
}

// æ ¸å¿ƒåŠŸèƒ½
- å®æ—¶æ•°æ®å¡ç‰‡ï¼ˆè®¿é—®é‡ã€é‚®ç®±æ•°ã€è½¬åŒ–ç‡ï¼‰
- Recharts æŠ˜çº¿å›¾ï¼ˆè¶‹åŠ¿å±•ç¤ºï¼‰
- AI åˆ†æé¢æ¿
- é‚®ç®±åˆ—è¡¨è¡¨æ ¼ + CSV å¯¼å‡º
```

### 3. AI åˆ†æ Edge Function

```typescript
// supabase/functions/analyze-landing-page/index.ts
// è¾“å…¥ï¼šlandingPageId, viewCount, emailCount, conversionRate, prdData
// è¾“å‡ºï¼šå¸‚åœºå¯è¡Œæ€§è¯„åˆ†ã€è¯¦ç»†åˆ†æã€å¼€å“å»ºè®®
```

### 4. æ•°æ®æŸ¥è¯¢

```sql
-- è·å–æŒ‰æ—¥æœŸåˆ†ç»„çš„ç»Ÿè®¡
SELECT 
  DATE(created_at) as date,
  COUNT(*) as count
FROM email_submissions
WHERE landing_page_id = $1
GROUP BY DATE(created_at)
ORDER BY date DESC
LIMIT 30;
```

---

## ä¿®æ”¹æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | æ“ä½œ | ä¿®æ”¹å†…å®¹ |
|------|------|----------|
| `src/components/StageIndicator.tsx` | ä¿®æ”¹ | å±…ä¸­å¸ƒå±€è°ƒæ•´ |
| `src/components/LandingPageBuilder.tsx` | ä¿®æ”¹ | æ·»åŠ å‘å¸ƒååˆ‡æ¢åˆ°ç›‘æ§é¡µçš„é€»è¾‘ |
| `src/components/LandingPageAnalytics.tsx` | æ–°å»º | æ•°æ®ç›‘æ§é¢æ¿ç»„ä»¶ |
| `src/pages/Project.tsx` | ä¿®æ”¹ | è°ƒæ•´ PRD é˜¶æ®µçš„æ¡ä»¶æ¸²æŸ“ |
| `src/components/PrdPhase.tsx` | ä¿®æ”¹ | æ·»åŠ åªè¯»æ¨¡å¼æç¤º |
| `supabase/functions/analyze-landing-page/index.ts` | æ–°å»º | AI å¸‚åœºåˆ†æ Edge Function |

---

## ç”¨æˆ·ä½“éªŒæµç¨‹

1. **è½åœ°é¡µç”Ÿæˆ** â†’ ç”¨æˆ·ç”Ÿæˆè½åœ°é¡µ
2. **ç‚¹å‡»å‘å¸ƒ** â†’ è‡ªåŠ¨åˆ‡æ¢åˆ°æ•°æ®ç›‘æ§é¡µé¢
3. **æŸ¥çœ‹æ•°æ®** â†’ å®æ—¶ç›‘æ§è®¿é—®é‡ã€è½¬åŒ–ç‡
4. **AI åˆ†æ** â†’ è·å–äº§å“å¼€å“å»ºè®®
5. **å†³ç­–æ”¯æŒ** â†’ æ ¹æ®å¸‚åœºåé¦ˆå†³å®šæ˜¯å¦æ¨è¿›äº§å“å¼€å‘
