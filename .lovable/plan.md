
# AI 产品经理面板优化方案

## 需求分析
根据截图和描述，需要优化以下三个方面：
1. **AI思考进度条** - 让用户知道AI正在工作的状态
2. **对话滚动框** - 聊天区域可滚动，左侧信息收集列表保持固定
3. **UI与排版优化** - 提升对话内容的可读性和视觉效果

---

## 实施计划

### 1. AI 思考进度条增强
**当前状态**: 已有基础进度条实现（第211-282行 AiProductManagerPanel.tsx）

**优化内容**:
- 增加更明显的进度条高度（从 h-1.5 改为 h-2）
- 添加步骤式进度指示器（显示当前执行阶段）
- 优化动画效果，使进度更加流畅
- 添加预计等待时间提示

### 2. 滚动框架优化
**当前状态**: 已有 ScrollArea 实现，但可能存在高度计算问题

**优化内容**:
- 确保主容器使用 `flex-1 min-h-0 overflow-hidden`
- 左侧边栏保持 `flex-shrink-0` 固定宽度
- 右侧聊天区域独立滚动
- 修复 Radix ScrollArea viewport 高度继承问题

### 3. UI 与排版优化

**对话气泡样式**:
- 增加消息间距和内边距
- 优化渐变背景效果
- 添加微妙的阴影和边框

**文字排版**:
- 段落行高从 leading-7 调整为更舒适的间距
- 标题增加左侧装饰条
- 列表项使用彩色圆点标记
- 引用块添加背景色
- 强调文字使用主题色

**左侧边栏优化**:
- 添加卡片悬停效果
- 进度条视觉增强
- 信息收集状态更清晰

---

## 技术实现细节

### 文件修改清单

| 文件 | 修改内容 |
|------|----------|
| `src/components/AiProductManagerPanel.tsx` | 思考进度条增强、布局优化 |
| `src/components/ChatMessage.tsx` | 排版样式优化、段落间距调整 |
| `src/components/PrdExtractionSidebar.tsx` | 侧边栏视觉增强 |

### AiProductManagerPanel.tsx 修改
```text
1. 思考进度条区域 (第211-282行):
   - 增加进度条高度和视觉层次
   - 添加步骤完成状态标识
   - 优化动画时序

2. 滚动容器 (第162-287行):
   - 确保 flex 布局正确嵌套
   - ScrollArea 高度继承修复
```

### ChatMessage.tsx 修改
```text
1. 消息容器样式:
   - 增加 p-6 内边距
   - 添加 hover:shadow-lg 效果
   - 优化渐变背景

2. 文字排版:
   - 段落: mb-4 leading-relaxed
   - 标题: 添加左侧渐变装饰条
   - 列表: 优化符号颜色和间距
   - 引用: 添加背景底色
```

### PrdExtractionSidebar.tsx 修改
```text
1. 整体容器添加 ScrollArea 确保可滚动
2. 进度卡片添加悬停动效
3. 完成状态添加脉冲动画
```

---

## 预期效果

- 用户发送消息后，能清晰看到3步骤进度指示
- 长对话内容可以流畅滚动，左侧PRD收集进度始终可见
- 对话内容层次分明，重点内容突出显示
- 整体视觉更现代、专业
