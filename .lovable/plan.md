
# Dashboard UI 优化计划

## 目标
优化仪表盘界面，放大项目卡片，丰富卡片内容，添加落地页效果图与链接，增加实用功能。

## 当前状态分析
- 项目卡片当前尺寸较小（封面图仅 80x80px）
- 卡片信息有限：项目名称、描述、阶段、状态、日期
- 缺少落地页相关信息展示
- 网格布局为 `grid-cols-3`，卡片较为紧凑

## 实施方案

### 1. 数据层增强
扩展 Dashboard 数据查询，同时获取项目关联的落地页信息：
- 落地页标题、slug、发布状态
- 落地页封面图（hero_image_url）
- 访问量统计（view_count）
- 邮件订阅数量统计

### 2. ProjectCard 组件重构

**卡片布局调整：**
- 从横向紧凑布局改为**纵向展示布局**
- 封面图区域扩大至**全宽高度 200px**
- 添加产品图与落地页预览的**双图展示区**

**新增信息展示：**
```
┌─────────────────────────────────────────┐
│  [产品封面图]           [落地页预览图]   │
│                                         │
├─────────────────────────────────────────┤
│  项目名称                     [状态标签] │
│  项目描述（2行截断）                     │
├─────────────────────────────────────────┤
│  📄 阶段: PRD细化 / 视觉生成 / 落地页    │
├─────────────────────────────────────────┤
│  落地页: [已发布 ✓] 链接按钮 | 👁 12次访问│
│         [未发布/未创建] 状态提示         │
├─────────────────────────────────────────┤
│  📅 创建时间              [继续 →] 按钮  │
└─────────────────────────────────────────┘
```

**落地页信息区：**
- 如已发布：显示"已发布"徽章 + 可点击链接按钮 + 访问量
- 如已创建但未发布：显示"草稿"状态
- 如未创建：显示"待生成"提示

### 3. Dashboard 网格布局优化

- 从 `lg:grid-cols-3` 改为 `lg:grid-cols-2`
- 增加卡片间距 `gap-8`
- 移动端保持单列布局

### 4. 新增实用功能

**快捷操作按钮：**
- 添加"访问落地页"快捷入口（新窗口打开）
- 添加"复制链接"按钮用于分享
- 添加"查看数据"按钮预览邮件订阅量

**统计面板增强：**
- 新增"已发布落地页"数量统计
- 新增"总访问量"统计
- 新增"邮件订阅数"统计

**快速筛选功能：**
- 添加阶段筛选标签（全部 / PRD / 视觉 / 落地页）
- 添加状态筛选（全部 / 进行中 / 已完成）

---

## 技术细节

### 数据库查询更新
```sql
SELECT 
  p.*,
  lp.id as landing_page_id,
  lp.slug as landing_page_slug,
  lp.is_published,
  lp.hero_image_url as landing_page_image,
  lp.view_count,
  (SELECT COUNT(*) FROM email_submissions es WHERE es.landing_page_id = lp.id) as email_count
FROM projects p
LEFT JOIN landing_pages lp ON lp.project_id = p.id
```

### 文件修改清单
| 文件 | 修改内容 |
|------|----------|
| `src/pages/Dashboard.tsx` | 增强数据查询、新增统计项、添加筛选功能、调整网格布局 |
| `src/components/ProjectCard.tsx` | 重构为纵向布局、新增落地页信息区、添加快捷操作按钮 |

### 落地页链接格式
根据路由配置，落地页访问路径为：
- 预览域名：`https://kaipinbao.lovable.app/lp/{slug}`
- 示例：`https://kaipinbao.lovable.app/lp/p-7jryil`
