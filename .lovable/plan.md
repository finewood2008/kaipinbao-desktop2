
# ä»ªè¡¨ç›˜é…å›¾ + PRD ç•Œé¢ä¼˜åŒ–è®¡åˆ’

## é¡¹ç›®æ¦‚è§ˆ

æœ¬æ¬¡ä¼˜åŒ–æ¶µç›–å››ä¸ªæ ¸å¿ƒæ”¹è¿›ï¼š
1. **ä»ªè¡¨ç›˜é¡¹ç›®é…å›¾** - æ¯ä¸ªé¡¹ç›®å¡ç‰‡å±•ç¤ºäº§å“å°é¢å›¾
2. **ç«å“é“¾æ¥é™å®šäºšé©¬é€Š** - ç®€åŒ–å¹³å°è¯†åˆ«é€»è¾‘
3. **PRD ç•Œé¢é‡æ–°è®¾è®¡** - å·¦ä¾§è¿›åº¦æ¡ + å³ä¾§ä¸“ä¸šå¯¹è¯åŒº
4. **AI å¯¹è¯å‡çº§** - æ™ºèƒ½è¯»å–ç«å“åˆ†æï¼ŒåŠ¨æ€ç”Ÿæˆä¸“ä¸šå»ºè®®

---

## ç¬¬ä¸€éƒ¨åˆ†ï¼šä»ªè¡¨ç›˜é¡¹ç›®é…å›¾

### 1.1 æ•°æ®åº“æ›´æ–°

ä¸º `projects` è¡¨æ–°å¢ `cover_image_url` å­—æ®µï¼Œå­˜å‚¨é¡¹ç›®å°é¢å›¾ï¼š

| å­—æ®µå | ç±»å‹ | æè¿° |
|--------|------|------|
| `cover_image_url` | `text` | é¡¹ç›®å°é¢å›¾URLï¼ˆæ¥è‡ªè§†è§‰ç”Ÿæˆé˜¶æ®µé€‰å®šçš„å›¾ç‰‡ï¼‰ |

### 1.2 ProjectCard ç»„ä»¶é‡æ„

æ›´æ–° `src/components/ProjectCard.tsx`ï¼š

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  é¡¹ç›®åç§°              â”‚
â”‚  â”‚   [å°é¢å›¾]   â”‚  é¡¹ç›®æè¿°...          â”‚
â”‚  â”‚     æˆ–      â”‚                        â”‚
â”‚  â”‚  [å ä½ç¬¦]   â”‚  é˜¶æ®µçŠ¶æ€ | æ—¥æœŸ        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   [â†’] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- æ–°å¢ `coverImage` å±æ€§
- æ— å›¾æ—¶æ˜¾ç¤ºæ¸å˜è‰²å ä½ç¬¦ + é¡¹ç›®é¦–å­—æ¯
- å›¾ç‰‡ä½¿ç”¨ `aspect-ratio: 1/1`ï¼Œåœ†è§’è£å‰ª

### 1.3 Dashboard æ•°æ®æŸ¥è¯¢æ›´æ–°

ä¿®æ”¹ `src/pages/Dashboard.tsx`ï¼š
- æŸ¥è¯¢æ—¶ JOIN `generated_images` è·å– `is_selected=true` çš„äº§å“å›¾ä½œä¸ºå°é¢
- æˆ–ç›´æ¥è¯»å– `projects.cover_image_url`

### 1.4 è‡ªåŠ¨å°é¢æ›´æ–°é€»è¾‘

å½“ç”¨æˆ·åœ¨è§†è§‰é˜¶æ®µé€‰å®šäº§å“å›¾æ—¶ï¼Œè‡ªåŠ¨æ›´æ–° `projects.cover_image_url`

---

## ç¬¬äºŒéƒ¨åˆ†ï¼šç«å“ç ”ç©¶ä»…æ”¯æŒäºšé©¬é€Š

### 2.1 æ›´æ–° CompetitorResearch ç»„ä»¶

ä¿®æ”¹ `src/components/CompetitorResearch.tsx`ï¼š
- ç§»é™¤å¤šå¹³å°è¯†åˆ«é€»è¾‘
- è¾“å…¥æ¡†æç¤ºæ–‡å­—æ”¹ä¸ºï¼š"ç²˜è´´ Amazon äº§å“é“¾æ¥..."
- æ·»åŠ  URL æ ¼å¼æ ¡éªŒï¼ˆä»…å…è®¸ amazon.com åŸŸåï¼‰
- éäºšé©¬é€Šé“¾æ¥ç»™å‡ºå‹å¥½æç¤ºï¼š"ç›®å‰ä»…æ”¯æŒ Amazon é“¾æ¥"

### 2.2 ç®€åŒ– scrape-competitor å‡½æ•°

ä¿®æ”¹ `supabase/functions/scrape-competitor/index.ts`ï¼š
- ä¸“æ³¨ä¼˜åŒ– Amazon é¡µé¢æŠ“å–é€»è¾‘
- ç§»é™¤å…¶ä»–å¹³å°çš„æŠ“å–é…ç½®

---

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šPRD ç•Œé¢é‡æ–°è®¾è®¡

### 3.1 æ–°å¸ƒå±€ç»“æ„

å°† PRD å¯¹è¯åŒºåŸŸæ”¹ä¸ºå·¦å³åˆ†æ å¸ƒå±€ï¼š

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       é¡¹ç›®å¤´éƒ¨ + é˜¶æ®µæŒ‡ç¤ºå™¨                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    â”‚                                         â”‚
â”‚  ğŸ“‹ PRD è¿›åº¦       â”‚         ğŸ’¬ å¯¹è¯åŒºåŸŸ                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  âœ… ä½¿ç”¨åœºæ™¯       â”‚  â”‚ [ç«å“åˆ†ææ‘˜è¦å¡ç‰‡]              â”‚    â”‚
â”‚  âœ… ç›®æ ‡ç”¨æˆ·       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â¬œ å¤–è§‚é£æ ¼       â”‚                                         â”‚
â”‚  â¬œ æ ¸å¿ƒåŠŸèƒ½       â”‚  AI: æ ¹æ®ç«å“åˆ†æï¼Œæˆ‘å‘ç°...           â”‚
â”‚  â¬œ ä¿¡æ¯ç¡®è®¤       â”‚                                         â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”â”â”â”â”â”â”â”â” 60%    â”‚  â”‚ ğŸ’¡ ä¸“ä¸šå»ºè®®å¡ç‰‡                  â”‚    â”‚
â”‚                    â”‚  â”‚ â€¢ ç»­èˆªæ˜¯ä¸»è¦ç—›ç‚¹                 â”‚    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚  â”‚ â€¢ å»ºè®®çªå‡ºå¿«å……åŠŸèƒ½               â”‚    â”‚
â”‚  ğŸ“Š ç«å“æ´å¯Ÿ       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â€¢ å¥½è¯„: è´¨é‡      â”‚                                         â”‚
â”‚  â€¢ å·®è¯„: ç»­èˆª      â”‚  ç”¨æˆ·: ...                              â”‚
â”‚                    â”‚                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  ğŸ¯ å¾…æ”¶é›†ä¿¡æ¯     â”‚  [è¾“å…¥æ¡†]                     [å‘é€]    â”‚
â”‚  ç‚¹å‡»å¯å¿«é€Ÿæé—®    â”‚                                         â”‚
â”‚                    â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’¡ å»ºè®®: [åœºæ™¯å›¾] | [ç»“æ„å›¾] | [çˆ†ç‚¸å›¾] | [ä½¿ç”¨å›¾]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 åˆ›å»ºæ–°ç»„ä»¶

**æ–°å»º `src/components/PrdSidebar.tsx`**

åŠŸèƒ½ï¼š
- è¿›åº¦è¿½è¸ªå¯è§†åŒ–ï¼ˆå‚ç›´å¸ƒå±€ï¼‰
- ç«å“æ´å¯Ÿæ‘˜è¦å±•ç¤º
- å¾…æ”¶é›†ä¿¡æ¯å¿«æ·æé—®å…¥å£
- åç»­éœ€è¦çš„æ•°æ®æç¤ºï¼ˆè¥é”€å›¾ç‰‡ç±»å‹ã€è§†é¢‘åœºæ™¯ç­‰ï¼‰

**æ–°å»º `src/components/PrdChatPanel.tsx`**

åŠŸèƒ½ï¼š
- ä¸“ä¸šå¯¹è¯ç•Œé¢
- ç«å“åˆ†ææ‘˜è¦å¡ç‰‡ï¼ˆå¯¹è¯å¼€å§‹æ—¶å±•ç¤ºï¼‰
- ä¸“ä¸šå»ºè®®é«˜äº®æ˜¾ç¤º
- æ›´å¥½çš„æ¶ˆæ¯åˆ†ç»„å’Œè§†è§‰å±‚æ¬¡

### 3.3 æ›´æ–° PrdProgressIndicator

ä¿®æ”¹ä¸ºå‚ç›´å¸ƒå±€ï¼Œé€‚é…ä¾§è¾¹æ ï¼š

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ PRD è¿›åº¦  3/5    â”‚
â”‚ â”â”â”â”â”â”â”â”â”â” 60%     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… ä½¿ç”¨åœºæ™¯         â”‚
â”‚    å®¤å†…åŠå…¬ç¯å¢ƒ     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… ç›®æ ‡ç”¨æˆ·         â”‚
â”‚    å¹´è½»ç™½é¢†         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â¬œ å¤–è§‚é£æ ¼ [ç‚¹å‡»]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â¬œ æ ¸å¿ƒåŠŸèƒ½ [ç‚¹å‡»]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â¬œ ä¿¡æ¯ç¡®è®¤         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç¬¬å››éƒ¨åˆ†ï¼šAI å¯¹è¯ä¸“ä¸šåŒ–å‡çº§

### 4.1 æ›´æ–° Chat Edge Function

ä¿®æ”¹ `supabase/functions/chat/index.ts`ï¼š

**4.1.1 å¯¹è¯å¼€å§‹æ—¶æ³¨å…¥ç«å“åˆ†æ**

```typescript
// è·å–ç«å“ç ”ç©¶æ•°æ®
const competitorData = await getCompetitorAnalysis(projectId);

// æ„å»ºåŠ¨æ€ç³»ç»Ÿæç¤º
const dynamicPrompt = buildDynamicSystemPrompt(competitorData);
```

**4.1.2 æ–°å¢æ•°æ®æ”¶é›†æ¸…å•**

åœ¨ç³»ç»Ÿæç¤ºä¸­æ˜ç¡®åç»­è§†è§‰ç”Ÿæˆæ‰€éœ€çš„ä¿¡æ¯ï¼š

```text
## å¿…é¡»æ”¶é›†çš„ä¿¡æ¯ï¼ˆç”¨äºåç»­è§†è§‰ç”Ÿæˆï¼‰

### è¥é”€å›¾ç‰‡æ‰€éœ€æ•°æ®ï¼š
- åœºæ™¯å›¾ï¼šå…·ä½“ä½¿ç”¨ç¯å¢ƒæè¿°ï¼ˆå…‰çº¿ã€èƒŒæ™¯ã€æ°›å›´ï¼‰
- ç»“æ„å›¾ï¼šäº§å“å†…éƒ¨ç»“æ„è¦ç‚¹
- çˆ†ç‚¸å›¾ï¼šä¸»è¦ç»„ä»¶åˆ—è¡¨
- ä½¿ç”¨å›¾ï¼šç”¨æˆ·ä½¿ç”¨å§¿æ€ã€è¡¨æƒ…ã€åœºæ™¯
- ç”Ÿæ´»æ–¹å¼å›¾ï¼šç›®æ ‡ç”¨æˆ·çš„ç”Ÿæ´»åœºæ™¯

### è§†é¢‘ç”Ÿæˆæ‰€éœ€æ•°æ®ï¼š
- ä½¿ç”¨åœºæ™¯å®šä¹‰ï¼ˆ6ç§’è§†é¢‘çš„æ•…äº‹çº¿ï¼‰
- å…³é”®åŠ¨ä½œæè¿°
- æƒ…æ„Ÿæ°›å›´åŸºè°ƒ
```

**4.1.3 åŠ¨æ€ä¸“ä¸šå»ºè®®ç”Ÿæˆ**

ä¸å†ä½¿ç”¨å›ºå®šæ¨¡æ¿ï¼Œè€Œæ˜¯åŸºäºç«å“åˆ†æåŠ¨æ€ç”Ÿæˆï¼š

```text
ç¤ºä¾‹è¾“å…¥ï¼ˆç«å“å·®è¯„ç—›ç‚¹ï¼šç»­èˆªçŸ­ã€å……ç”µæ…¢ï¼‰

è¾“å‡ºï¼š
"æ ¹æ®ç«å“ç”¨æˆ·è¯„è®ºåˆ†æï¼Œæˆ‘æ³¨æ„åˆ°ã€ç»­èˆªã€‘æ˜¯ç”¨æˆ·æœ€å¤§çš„ç—›ç‚¹ï¼ˆ32%å·®è¯„æåŠï¼‰ã€‚
å»ºè®®æ‚¨çš„äº§å“é‡ç‚¹çªå‡ºä»¥ä¸‹å·®å¼‚åŒ–æ–¹å‘ï¼š
1. âš¡ å¿«å……æŠ€æœ¯ - 30åˆ†é’Ÿå……æ»¡80%
2. ğŸ”‹ è¶…é•¿ç»­èˆª - æ¯”ç«å“å¤šXå°æ—¶
3. ğŸ“± æ™ºèƒ½ç”µé‡ç®¡ç† - æ˜¾ç¤ºå‰©ä½™ä½¿ç”¨æ—¶é—´

è¯·é—®æ‚¨å¯¹è¿™äº›æ–¹å‘æœ‰ä»€ä¹ˆçœ‹æ³•ï¼Ÿæˆ–è€…æ‚¨æœ‰å…¶ä»–å·®å¼‚åŒ–çš„æƒ³æ³•ï¼Ÿ"
```

### 4.2 é¦–æ¬¡å¯¹è¯å¢å¼º

å½“ç”¨æˆ·å®Œæˆç«å“ç ”ç©¶åï¼ŒAI é¦–æ¬¡å¯¹è¯åº”è¯¥ï¼š

1. **å±•ç¤ºç«å“åˆ†æå¡ç‰‡**ï¼ˆéå¯¹è¯å†…å®¹ï¼ŒUI ç»„ä»¶ï¼‰
2. **ç›´æ¥ç»™å‡ºä¸“ä¸šæ´å¯Ÿ**ï¼Œè€Œéå›ºå®šæ¨¡æ¿é—®é¢˜
3. **åŸºäºç«å“ç—›ç‚¹æå‡ºåˆ›æ–°å»ºè®®**
4. **å¼•å¯¼ç”¨æˆ·ç¡®è®¤æˆ–è¡¥å……æ–¹å‘**

ç¤ºä¾‹é¦–æ¬¡å¯¹è¯ï¼š

```text
[å½“å‰é˜¶æ®µï¼šPRDç»†åŒ–]

ğŸ” **ç«å“ç ”ç©¶æ´å¯Ÿ**

æˆ‘å·²åˆ†æäº†æ‚¨æ·»åŠ çš„ 2 æ¬¾ç«å“çš„ 156 æ¡ç”¨æˆ·è¯„è®ºï¼Œå‘ç°ï¼š

ğŸ“ˆ **ç”¨æˆ·çœ‹é‡çš„ä¼˜ç‚¹**
â€¢ è´¨é‡å¥½ (68%)
â€¢ è®¾è®¡ç¾è§‚ (45%)
â€¢ ä¾¿æºæ€§å¼º (32%)

ğŸ“‰ **ä¸»è¦ç—›ç‚¹æœºä¼š**
â€¢ ç»­èˆªçŸ­ (32%) â† æœ€å¤§ç—›ç‚¹
â€¢ å……ç”µæ…¢ (18%)
â€¢ è¯´æ˜ä¹¦ä¸æ¸…æ™° (12%)

ğŸ’¡ **åˆ›æ–°å»ºè®®**
åŸºäºä»¥ä¸Šåˆ†æï¼Œæˆ‘å»ºè®®æ‚¨çš„äº§å“å¯ä»¥ä»ã€è¶…é•¿ç»­èˆª + å¿«å……ã€‘å…¥æ‰‹ï¼Œè¿™æ˜¯ç«å“çš„æ˜æ˜¾çŸ­æ¿ã€‚

---

**æ‚¨çš„äº§å“æ–¹å‘**ï¼š${é¡¹ç›®æè¿°}

è¯·é—®ï¼š
1. æ‚¨åŒæ„ä»¥"ç»­èˆª"ä½œä¸ºæ ¸å¿ƒå·®å¼‚åŒ–å–ç‚¹å—ï¼Ÿ
2. è¿˜æ˜¯æ‚¨æœ‰å…¶ä»–ç‹¬ç‰¹çš„äº§å“å®šä½æƒ³æ³•ï¼Ÿ

ğŸ’¡ [åŒæ„ç»­èˆªå–ç‚¹] | [æˆ‘æœ‰å…¶ä»–æƒ³æ³•] | [æƒ³äº†è§£æ›´å¤šç«å“ç»†èŠ‚]
```

### 4.3 è¦†ç›–åç»­é˜¶æ®µæ•°æ®éœ€æ±‚

åœ¨ PRD å¯¹è¯ä¸­ï¼ŒAI éœ€è¦ä¸»åŠ¨æ”¶é›†ä»¥ä¸‹ä¿¡æ¯ï¼š

**è¥é”€å›¾ç‰‡ç±»å‹æ•°æ®**ï¼š
| å›¾ç‰‡ç±»å‹ | éœ€è¦æ”¶é›†çš„ä¿¡æ¯ |
|----------|----------------|
| åœºæ™¯å›¾ | å…·ä½“ä½¿ç”¨ç¯å¢ƒã€å…‰çº¿ã€èƒŒæ™¯å…ƒç´  |
| ç»“æ„å›¾ | å…³é”®å†…éƒ¨ç»„ä»¶ã€æŠ€æœ¯äº®ç‚¹ |
| çˆ†ç‚¸å›¾ | ä¸»è¦é›¶éƒ¨ä»¶åˆ—è¡¨ã€ç»„è£…é€»è¾‘ |
| ä½¿ç”¨å›¾ | ç›®æ ‡ç”¨æˆ·å½¢è±¡ã€ä½¿ç”¨å§¿æ€ã€è¡¨æƒ… |
| ç”Ÿæ´»æ–¹å¼å›¾ | ç”¨æˆ·ç”Ÿæ´»åœºæ™¯ã€æƒ…æ„Ÿæ°›å›´ |

**è§†é¢‘ç”Ÿæˆæ•°æ®**ï¼š
| æ•°æ®é¡¹ | æè¿° |
|--------|------|
| åœºæ™¯å®šä¹‰ | 6ç§’è§†é¢‘çš„æ•…äº‹çº¿ï¼ˆå¼€åœº-å±•ç¤º-ç»“å°¾ï¼‰ |
| å…³é”®åŠ¨ä½œ | äº§å“æˆ–ç”¨æˆ·çš„æ ¸å¿ƒåŠ¨ä½œ |
| æƒ…æ„ŸåŸºè°ƒ | ä¸“ä¸š/æ¸©é¦¨/æ´»åŠ›/ç§‘æŠ€æ„Ÿ |

---

## ç¬¬äº”éƒ¨åˆ†ï¼šæŠ€æœ¯å®ç°ç»†èŠ‚

### 5.1 æ–‡ä»¶å˜æ›´åˆ—è¡¨

| æ–‡ä»¶è·¯å¾„ | æ“ä½œ | æè¿° |
|---------|------|------|
| æ•°æ®åº“è¿ç§» | æ–°å»º | æ·»åŠ  `cover_image_url` å­—æ®µ |
| `src/components/ProjectCard.tsx` | ä¿®æ”¹ | æ·»åŠ å°é¢å›¾å±•ç¤º |
| `src/pages/Dashboard.tsx` | ä¿®æ”¹ | æŸ¥è¯¢å°é¢å›¾æ•°æ® |
| `src/components/CompetitorResearch.tsx` | ä¿®æ”¹ | é™å®šä»…æ”¯æŒäºšé©¬é€Š |
| `src/components/PrdSidebar.tsx` | æ–°å»º | PRD ä¾§è¾¹æ ç»„ä»¶ |
| `src/components/PrdChatPanel.tsx` | æ–°å»º | ä¸“ä¸šå¯¹è¯é¢æ¿ |
| `src/components/PrdProgressIndicator.tsx` | ä¿®æ”¹ | æ”¯æŒå‚ç›´å¸ƒå±€ |
| `src/components/CompetitorInsightCard.tsx` | æ–°å»º | ç«å“æ´å¯Ÿæ‘˜è¦å¡ç‰‡ |
| `src/pages/Project.tsx` | ä¿®æ”¹ | é›†æˆæ–°çš„ PRD å¸ƒå±€ |
| `supabase/functions/chat/index.ts` | ä¿®æ”¹ | åŠ¨æ€æ³¨å…¥ç«å“åˆ†æï¼Œä¸“ä¸šåŒ–æç¤ºè¯ |
| `supabase/functions/scrape-competitor/index.ts` | ä¿®æ”¹ | ä¸“æ³¨äºšé©¬é€ŠæŠ“å– |

### 5.2 AI ç³»ç»Ÿæç¤ºè¯é‡æ„

**æ–°å¢åŠ¨æ€ä¸Šä¸‹æ–‡æ³¨å…¥**ï¼š

```typescript
function buildDynamicSystemPrompt(competitorData: CompetitorAnalysis): string {
  const basePrompt = SYSTEM_PROMPT;
  
  if (competitorData && competitorData.reviews.length > 0) {
    return `${basePrompt}

## ç«å“ç ”ç©¶æ•°æ®ï¼ˆå·²åˆ†æï¼‰

### åˆ†æçš„ç«å“ï¼š
${competitorData.products.map(p => `- ${p.title} (${p.rating}â˜…, ${p.reviewCount}æ¡è¯„è®º)`).join('\n')}

### ç”¨æˆ·å¥½è¯„è¦ç‚¹ï¼š
${competitorData.positivePoints.map(p => `- ${p.point} (${p.frequency}æ¬¡æåŠ)`).join('\n')}

### ç”¨æˆ·å·®è¯„ç—›ç‚¹ï¼š
${competitorData.negativePoints.map(p => `- ${p.point} (${p.frequency}æ¬¡æåŠ)`).join('\n')}

### å¯è¡ŒåŠ¨æ´å¯Ÿï¼š
${competitorData.actionableInsights.join('\n')}

---
**é‡è¦**ï¼šä½ å¿…é¡»åœ¨é¦–æ¬¡å›å¤ä¸­å±•ç¤ºè¿™äº›ç«å“æ´å¯Ÿï¼Œå¹¶åŸºäºè¿™äº›æ•°æ®ç»™å‡ºä¸“ä¸šçš„äº§å“å®šä½å»ºè®®ã€‚
ä¸è¦é—®å›ºå®šæ¨¡æ¿é—®é¢˜ï¼Œè€Œæ˜¯ç›´æ¥ç»“åˆç«å“æ•°æ®ç»™å‡ºè§è§£ã€‚
`;
  }
  
  return basePrompt;
}
```

### 5.3 PRD æ•°æ®ç»“æ„æ‰©å±•

æ‰©å±• `prd_data` å­˜å‚¨çš„å†…å®¹ï¼š

```typescript
interface PrdData {
  // åŸºç¡€ä¿¡æ¯
  usageScenario: string;
  targetAudience: string;
  designStyle: string;
  coreFeatures: string[];
  
  // è¥é”€å›¾ç‰‡æ‰€éœ€æ•°æ®
  marketingAssets: {
    sceneDescription: string;      // åœºæ™¯å›¾æè¿°
    structureHighlights: string[]; // ç»“æ„å›¾äº®ç‚¹
    explodedComponents: string[];  // çˆ†ç‚¸å›¾ç»„ä»¶
    usageScenarios: string[];      // ä½¿ç”¨å›¾åœºæ™¯
    lifestyleContext: string;      // ç”Ÿæ´»æ–¹å¼æè¿°
  };
  
  // è§†é¢‘ç”Ÿæˆæ‰€éœ€æ•°æ®
  videoAssets: {
    storyLine: string;           // 6ç§’æ•…äº‹çº¿
    keyActions: string[];        // å…³é”®åŠ¨ä½œ
    emotionalTone: string;       // æƒ…æ„ŸåŸºè°ƒ
  };
  
  // ç«å“æ´å¯Ÿå‚è€ƒ
  competitorInsights: {
    positivePoints: string[];
    negativePoints: string[];
    differentiationStrategy: string;
  };
}
```

---

## é¢„æœŸæ•ˆæœ

1. **ä»ªè¡¨ç›˜**ï¼šæ¯ä¸ªé¡¹ç›®å¡ç‰‡éƒ½æœ‰äº§å“å°é¢å›¾ï¼Œè§†è§‰æ•ˆæœæ›´å¥½
2. **ç«å“ç ”ç©¶**ï¼šä¸“æ³¨äºšé©¬é€Šï¼ŒæŠ“å–æ›´ç¨³å®šå¯é 
3. **PRD ç•Œé¢**ï¼šå·¦ä¾§è¿›åº¦ä¸€ç›®äº†ç„¶ï¼Œå³ä¾§å¯¹è¯æ›´ä¸“ä¸š
4. **AI å¯¹è¯**ï¼šç›´æ¥è¯»å–ç«å“åˆ†æï¼Œç»™å‡ºä¸“ä¸šæ´å¯Ÿå’Œåˆ›æ–°å»ºè®®ï¼Œä¸å†æ˜¯å›ºå®šæ¨¡æ¿é—®ç­”
5. **æ•°æ®å®Œæ•´æ€§**ï¼šPRD é˜¶æ®µæ”¶é›†çš„ä¿¡æ¯èƒ½å®Œæ•´æ”¯æ’‘åç»­è¥é”€å›¾ç‰‡å’Œè§†é¢‘ç”Ÿæˆ
